mkdir backend
django-admin startproject myproject backend


інструменти: 
    sops: менеджер для шифрування, як pgp тільки простіше  
     age: асиметричне шифрування
встановлення (Windows): по ідеї відкривити PowerShell, як адміністратор та ввести 
winget install --id FiloSottile.age
також скачати soap звідси https://github.com/getsops/sops/releases/download/v3.11.0/sops-v3.11.0.amd64.exe

(всі команди виконувати з lab3_python)
одноразво
age-keygen -o sops_key.txt

раз на сеанс
export SOPS_AGE_KEY_FILE=./sops_key.txt

закодувати
sops --config .sops.yml --input-type dotenv --output-type dotenv --encrypt backend/.env > backend/.env.enc

розкодувати
sops --config .sops.yml --input-type dotenv --output-type dotenv --decrypt backend/.env.enc > backend/.env



---------------------------------------------------------------------------------------------------------

всі сторінки за посиланням /api стали захищеними (вимагають реєстрації) тому потрібно надіслати post запит на login/ {
    "email": email,
    "password": password
} 
щоб отримати jwt токен (триває 15хв)

щоб оновити його коли просрочився потрібно надіслати post запит на login/refresh/ {
    "refresh": refresh_token
}

для того щоб створити користувача потрібно перейти на /api/users/ (тільки для створеня звичайного користувача, єдина незахищена адерса на api/) де post запитом передати {
    "password": password,
    "username": username,
    "email": email
} 


для доступу до api/:
    інструмент: 
        postman: вміє надсилати запити усіх форматів (дуже популярний і зручний)
    встановлення (Windows): https://www.postman.com/downloads/

    створити команду, колекцію, в ній новий request вставити потрібний url, у вкладці Auth обрати Bearer token та вставити access токен
    далі можна виконувати запити авторизовано

    також:
        за посиланням /swagger щоб отримати доступ до захищених посилань потрібно нажати угорі Authorize ввести таке "Bearer access_token" де access_token замінити на свій




для нормального зaпуску потрібно запустити (due to replacement of docker-compose.yml)
docker run --rm -v backend_db_lab:/from -v lab3_python_db_lab:/to alpine sh -c "cp -a /from/. /to/"
а далі з кореня проекту 
docker-compose --env-file ./backend/.env up


в нас в бд вказано обмеження на тривалысть вистави у 10 годин...

git config user.email "neroforwork@gmail.com"
git config user.name "birdnero"


git config user.email "neroforwork@gmail.com"
git config user.name "birdnero"